# Use the official oauth2-proxy image as base
FROM quay.io/oauth2-proxy/oauth2-proxy:v7.9.0

ENV OAUTH2_PROXY_CLIENT_ID="88ee2841907967364b866d87273989fea15c805e28f761910e5584ab3691595c"
ENV OAUTH2_PROXY_CLIENT_SECRET="gloas-a65ecadb3ed6e19ab9e96e9faa505b3bd861a4dbda423bfc9510e3273b2a5554"
ENV OAUTH2_PROXY_COOKIE_SECRET="cookiesecret1234"
ENV OAUTH2_PROXY_PROVIDER="gitlab"
ENV OAUTH2_PROXY_REDIRECT_URL="https://172.18.0.240.nip.io/oauth2/callback"
ENV OAUTH2_PROXY_HTTP_ADDRESS="0.0.0.0:4180"
ENV OAUTH2_PROXY_UPSTREAMS="http://nginx:8080"
ENV OAUTH2_PROXY_OIDC_ISSUER_URL="https://projects.govcms.gov.au"
ENV OAUTH2_PROXY_EMAIL_DOMAINS="*"
ENV OAUTH2_PROXY_COOKIE_SECURE="false"
ENV OAUTH2_PROXY_SCOPE="openid profile email"
ENV OAUTH2_PROXY_CODE_CHALLENGE_METHOD="S256"
ENV OAUTH2_PROXY_COOKIE_CSRF_PER_REQUEST="true"
ENV OAUTH2_PROXY_SKIP_PROVIDER_BUTTON="true"
ENV OAUTH2_PROXY_REVERSE_PROXY="true"

